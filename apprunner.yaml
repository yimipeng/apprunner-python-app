version: 1.0
runtime: python3
build:
  commands:
    build:
      - pip3 install -r requirements.txt
      - opentelemetry-bootstrap --action=install

run:
  command: OTEL_PROPAGATORS=xray OTEL_PYTHON_ID_GENERATOR=xray opentelemetry-instrument python3 app.py
  network:
    port: 8080
  env:
    - name: OTEL_PYTHON_DISABLED_INSTRUMENTATIONS
      value: urllib3
    - name: OTEL_RESOURCE_ATTRIBUTES
      value: 'service.name=movies_app'
